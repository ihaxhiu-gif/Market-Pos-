<!DOCTYPE html>
<html lang="sq">
<head>
<meta charset="UTF-8">
<title>Firebase Stock TEST</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{font-family:Arial;background:#f1f5f9;padding:20px}
input,button{padding:10px;margin:5px}
table{width:100%;border-collapse:collapse;margin-top:20px}
th,td{border:1px solid #ccc;padding:8px}
</style>
</head>

<body>

<h2>ðŸ§ª TEST SHTIM PRODUKTI</h2>

<input id="name" placeholder="Emri">
<input id="barcode" placeholder="Barkod">
<input id="price" type="number" placeholder="Ã‡mimi">
<input id="qty" type="number" placeholder="Sasia">
<button onclick="add()">âž• Shto</button>

<table>
<thead>
<tr><th>EmÃ«r</th><th>Barkod</th><th>Ã‡mim</th><th>Sasi</th></tr>
</thead>
<tbody id="list"></tbody>
</table>

<script>
firebase.initializeApp({
 apiKey: "AIzaSyD_CfsHudMqShAeXzOg7z91xYE7k-13hbk",
 databaseURL: "https://market-pos-ab2e4-default-rtdb.europe-west1.firebasedatabase.app"
});

const db = firebase.database();
const list = document.getElementById("list");

function add(){
 db.ref("products").push({
   n: name.value,
   b: barcode.value,
   p: Number(price.value),
   s: Number(qty.value)
 });
 name.value=barcode.value=price.value=qty.value="";
}

/* ðŸ”¥ RENDER I SIGURT */
db.ref("products").on("child_added", snap=>{
 const p = snap.val();
 const tr = document.createElement("tr");
 tr.innerHTML = `
  <td>${p.n}</td>
  <td>${p.b}</td>
  <td>${p.p}</td>
  <td>${p.s}</td>
 `;
 list.appendChild(tr);
});
</script>

</body>
</html>
